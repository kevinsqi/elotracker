<div class="header">
  <h1><%= @league.name %></h1>
  <div class="description">
    <%= @league.description %> |
    <%= @league.is_public ? 'Public' : 'Private' %> |
    <%= @league.is_completed ? 'Complete' : 'Ongoing' %> |
    <%= link_to 'League Settings', edit_league_path(@league) %>
  </div>
</div>

<div id="main-content">
  <%# TODO this shouldn't be rendered if blank? %>
  <p id="notice"><%= notice %></p>

  <div class="section">
    <h2>New match</h2>
    <div class="content">
      <%= form_for @league.matches.build, :remote => true do |form| %>
        <%= form.label :player_one %>
        <%= form.select :player_one, options_from_collection_for_select(@league.players, :id, :name) %>

        <%= form.label :player_two %>
        <%= form.select :player_two, options_from_collection_for_select(@league.players, :id, :name) %>

        <%= form.submit 'Submit match result' %>
      <% end %>
    </div>
  </div>

  <div class="section">
    <h2>Recent matches</h2>
    <div class="content">
      <% if @league.matches.empty? %>
        No matches have been submitted yet.
      <% else %>
        <% @league.matches.each do |match| %>
          <%= match.inspect %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>

<div id="sidebar">
  <div class="section">
    <h2>Rankings</h2>
    <ol>
      <% if @league.players.empty? %>
        No players have been added yet.
        <%= link_to 'Add them now', edit_league_path %>.
      <% else %>
        <% @league.players.each do |player| %>
          <li>
            <%= player.name %>, <%= player.player_rating.rating %>
          </li>
        <% end %>
      <% end %>
    </ol>
  </div>

  <div class="section">
    <h2>Add new player</h2>
    <%= form_for @league.players.build, :remote => true do |form| %>
      <%= form.label :name %><%= form.text_field :name %>
      <%= form.submit 'Add' %>
    <% end %>
  </div>
</div>


